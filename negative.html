<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Negative Bar Chart</title>
    <script type="text/javascript" src="d3.min.js"></script>

    <style >
    h2 {text-indent: 50px; }
  
    svg {background-color: #DADFFF;}
    .bar{
      fill: rgb(51,122,183);
      opacity: 0.5;
      }

    .bar:hover {
      fill: #febc3b;
    }

    </style>

  </head>

  <body>
    <h2>Negative Bar Charts</h2>

    <div class = "container">
      <div id="chart"></div>
    </div>

    <script type="text/javascript">
      d3.json("negative.json", function(d){
          d.MED_PW = +d.MED_PW;
          return d;
        }, function(error, data) {
          if(error) throw error;
          dataset = data;
          makeNegativeBar();
      });

      function makeNegativeBar(){
        console.log(dataset);


      var xScale = d3.scaleOrdinal();
        .domain(d3.extent(dataset, function(d){return d.NAIC_CODE_TITLE}));

      var yScale = d3.scaleLinear()
        .domain([d3.min(dataset, function(d){return d.MED_PW}),
          d3.max(dataset, function(d){return d.MED_PW})]);
        .range([0, 105000]);

      svg = d3.select("#chart")
      .append('svg')
      .attr('width', 600)
      .attr('height', 500);

      svg.append('g')
        .attr('transform','translate(' + 25 + ',' + 25 + ')')
        .call(d3.axisBottom(xScale));

      svg.append('g')
        .attr('transform','translate(' + 25 + ',' + 25 + ')')
        .call(d3.axisLeft(yScale));

      g = svg.append('g')
        .attr('transform','translate(' + 25 + ',' + 25 + ')');

      g.selectAll('.bar')
        .data(dataset)
        .enter()
        .append('rect')
        .attr('class','bar')
        .attr('r',8)
        .attr('cx', function(d){return xScale(d.NAIC_CODE_TITLE)})
        .attr('cy', function(d){return yScale(d.MED_PW)})
        .attr("height", function(d) { return height - y(d.MED_PW); 
        });
      };





    </script>


  </body>
</html>